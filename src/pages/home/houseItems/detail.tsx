import { memo, useContext, useEffect, useMemo, useRef } from 'react';
import './detail.less';
import { HomeContext } from '../config';
import useMedia from '@/hooks/useMedia';

const Detail = memo(({ item }: { item: string }) => {
  const [state, setState] = useContext(HomeContext);

  const [deviceWidth] = useMedia();

  const ref = useRef<HTMLDivElement>(null);

  const list = useMemo(() => {
    if (item === 'apartment') {
      return (
        <>
          <li>老宅潛力股，身價看漲</li>
          <li>
            低公設，<span>衣櫥打開有驚喜</span>
          </li>
          <li>生活機能佳，優質學區，給孩子最好的陪伴</li>
          <li>
            採光佳，<span>不用開冷氣就透心涼</span>
          </li>
        </>
      );
    }
    return (
      <>
        <li>四樓挑高透天，低總價稀有物件</li>
        <li>屋況佳，採光佳</li>
        <li>
          <span>保留屋主特殊品味祭壇</span>
        </li>
        <li>
          <span>怨念已請慈安堂消除</span>
        </li>
        <li>適合夫妻和諧、有愛之大家庭</li>
      </>
    );
  }, [item]);

  useEffect(() => {
    if (ref.current) {
      setState((S) => ({ ...S, detailWidth: 0 }));
      requestAnimationFrame(() => {
        setState((S) => ({
          ...S,
          detailWidth:
            S.detailWidth > (ref.current?.clientWidth || 0)
              ? S.detailWidth
              : ref.current?.clientWidth || 0,
        }));
      });
    }
  }, [item, deviceWidth]);

  return (
    <div className='detail'>
      <div className='title'>
        <svg
          xmlns='http://www.w3.org/2000/svg'
          xmlSpace='preserve'
          width='152.8'
          height='40.9'
          style={{ overflow: 'visible' }}
          viewBox='0 0 152.8 40.9'
        >
          <path
            fill='#fff'
            d='M1.9 8.4h12.6v3.5H0V8.4zm11.4 18.3v13.7h-3.1v-2H4.6v2H1.4c.1-.5.1-1 .1-1.4V28.2c0-.4 0-.8-.1-1.4h11.9zm-2.2-8.8H3.6L2 18v-3.3h10.6V18zM2 24v-3.2h10.6V24H2m8.3-17.8L7.2 8c-.7-1.8-1.8-3.7-3.1-5.6L7 .7c.9 1.2 2 3 3.3 5.5M4.6 35.4h5.6v-5.5H4.6zm28.7-8.7h2.4v3.8h-8.8V39c0 .7 0 1.1.1 1.4h-3.6c.1-.3.1-.7.1-1.4v-8.6h-8.3v-3.8h8.3V21h-6.4v-3.6h6.4v-5.1h-7.4V8.8h10.2c.6-1.1 1.2-2.5 1.9-4.1s1.1-2.9 1.3-3.8l3.3 1.4-.3.5c-.3.8-.6 1.7-1.1 2.8s-1 2.2-1.5 3.2h5v3.7h-8v5.1h6.8v3.6h-6.8v5.6h6.4zM23.7 7.1c-1.3.6-2.3 1-2.9 1.4-.8-1.9-1.9-4-3.2-6.2l3.2-1.2c.5.9 1 1.9 1.6 3 .5 1.1 1 2.1 1.3 3M39.6 38.6c.5-1.4.9-2.9 1.2-4.7s.5-3.4.6-5l2.6.7c-.1 1.8-.2 3.7-.5 5.6s-.6 3.6-1 5.1zm2.7-22.3-1.3.2-.8-3.1c.3-.1.6-.3.9-.7.5-.8 1.1-1.8 1.9-3.1.7-1.3 1.5-2.8 2.3-4.4s1.4-3 1.9-4.3L49.9 3l-.4.7c-.6 1.4-1.3 2.8-2.1 4.3s-1.5 2.6-1.9 3.4c-.5.7-.8 1.2-.9 1.4l4.1-.6c1.2-2.1 2-3.9 2.4-5.2l2.8 2.1-.5.7c-2.5 5.1-5.4 9.6-8.5 13.5l5.6-1.1c-.5-1.4-.9-2.4-1.2-3.1l2.7-1c.5 1.1 1 2.5 1.6 4.1s1 3.1 1.3 4.3l-3 1.1c0-.1-.1-.4-.2-.8s-.2-.9-.4-1.6c-2.9.6-5.8 1.2-8.5 1.7l-1.7.4-.9-3.4c.2-.1.3-.2.6-.3.2-.1.4-.3.4-.4 1.7-2.1 3.6-4.7 5.5-7.8zm3.6 13.3 2.6-.5c.3 1.2.6 2.6.8 4.3s.4 3.1.5 4.4l-2.9.7c0-1.2-.1-2.7-.3-4.3-.3-1.7-.5-3.2-.7-4.6m4.6-.6 2.4-.9c.4 1 .9 2.1 1.4 3.4s.8 2.5 1.1 3.6l-2.6 1.2c-.3-1.2-.6-2.5-1-3.8-.5-1.5-.9-2.7-1.3-3.5m23-22.8v31.6l.1 2.5h-3.4v-3.5H59.8v3.5h-3.4c.1-1 .1-1.8.1-2.5V6.2l-.1-2.5h17.2zm-10.2 1h-3.5v11h3.5zm-3.5 26h3.5V21.7h-3.5zm10.4-26h-3.8v11h3.8zm-3.8 26h3.8V21.7h-3.8zM98.6 1.2c.7 1.1 1.5 2.3 2.6 3.6 1 1.3 2.4 2.7 4 4.3 1.6 1.5 3.3 3 5.1 4.2 1.8 1.3 3.5 2.4 5.1 3.2-.3.4-.7 1-1.1 1.7-.5.7-.8 1.4-1.1 1.9-1.5-.8-3.2-2-5-3.5-1.9-1.5-3.9-3.3-6-5.6s-3.9-4.5-5.4-6.7c-.8 1.3-1.8 2.6-2.9 4q-1.65 2.1-4.2 4.5c-1.7 1.6-3.4 3.1-5.2 4.4s-3.4 2.4-4.9 3.2c-.4-.9-1.1-2.1-2.2-3.7 1.2-.6 2.4-1.3 3.7-2.2 1.3-.8 2.5-1.7 3.7-2.7s2.5-2.1 3.8-3.4 2.5-2.6 3.5-4.1c1.1-1.5 2-2.9 2.7-4.3l3.9.8zm-9.3 16.3c0-.6 0-1.1-.1-1.6l3.7.2-.1 1q0 7.2-1.2 11.7c-.8 3-2 5.5-3.5 7.4q-2.4 2.85-6.6 4.8c-.4-.4-1.4-1.5-3.1-3.1 1.5-.6 2.9-1.3 4-2.1 1.2-.8 2.2-1.7 3.1-2.8s1.6-2.4 2.1-3.8c.5-1.5.9-3.1 1.2-4.9.3-2 .5-4.2.5-6.8m14.9-1.7c-.1.3-.1.8-.1 1.5v21.3c0 .5 0 1.2.1 2h-3.9l.1-2V17.3c0-.5 0-1-.1-1.6 1.9 0 3.1.1 3.9.1M117.9 38.4c.5-1.4.9-3 1.2-4.7.3-1.8.5-3.3.6-4.7l2.8.5c-.1 1.7-.3 3.6-.6 5.5-.3 2-.7 3.7-1.1 5.2-.9-.6-1.9-1.2-2.9-1.8m9.7-19.3 2.5-1.2c.6 1.1 1.2 2.4 1.9 4s1.2 3 1.6 4.1l-2.8 1.4c-.1-.5-.3-1.2-.6-2.2-3.3.7-6.4 1.3-9.3 1.9l-1.6.4-.8-3.4c.5-.2.8-.4.9-.7q.6-.6 2.1-2.7c1-1.3 2.2-3.1 3.5-5.2l-4.6.8-1.3.3-.7-3.1c.1-.1.3-.1.5-.3.2-.1.3-.2.4-.4 1-1.4 2.1-3.2 3.3-5.5s2-4.3 2.6-6.1l3.2 1.5q-.45.6-.6.9c-.4.8-.8 1.7-1.4 2.8s-1.2 2.2-1.9 3.4-1.4 2.3-2 3.2l4.6-.7c.3-.6.8-1.4 1.3-2.5.5-1 .9-1.9 1.2-2.5l3.1 1.6c-.3.3-.5.7-.7 1.1-1 1.8-2.3 4-4.1 6.7-1.8 2.6-3.4 4.9-4.9 6.8 2.2-.3 4.3-.7 6.4-1.2-1-1.6-1.5-2.6-1.8-3.2m-3.7 10.5 2.6-.5c.3 1.2.5 2.6.8 4.2.2 1.6.4 3.1.5 4.3-.7.1-1.7.4-3 .7-.1-1.7-.2-3.3-.4-4.8-.1-1.6-.3-2.9-.5-3.9m4.1-.8 2.5-1c.4.9.9 2.1 1.4 3.5s1 2.8 1.4 4l-2.8 1.3c-.2-.6-.4-1.5-.7-2.6s-.7-2.1-1-3.1c-.3-.9-.6-1.6-.8-2.1M152.8 3l-.1 1.2c0 4-.1 6.9-.3 8.6-.1 1.7-.4 3-.8 4-.4 1.1-1.3 1.9-2.6 2.5q-1.95.9-5.4.9c-.1-.3-.2-.8-.4-1.5-.2-.8-.5-1.7-.9-2.8.7.2 1.5.4 2.6.4 1 0 1.8-.1 2.4-.4s1-.7 1.3-1.3c.2-.6.4-1.4.5-2.5s.2-2.9.2-5.5h-5.1c-.6 6.9-3.5 11.7-8.9 14.4l-2-3.3c1.5-.7 2.8-1.5 3.7-2.4s1.6-1.8 2.1-2.6.8-1.7 1.1-2.7.5-2.1.6-3.4h-6V3h18m-1 19.6v17.8h-3.5v-2.3h-9.5v2.3h-3.4c.1-.6.1-1.1.1-1.6V24.2c0-.4 0-.9-.1-1.6zm-13 12h9.5v-8.5h-9.5z'
          />
        </svg>
      </div>
      <div className='table'>
        <div className='head'>
          <svg
            xmlns='http://www.w3.org/2000/svg'
            xmlSpace='preserve'
            width='221.4'
            height='55.9'
            style={{ overflow: 'visible' }}
            viewBox='0 0 221.4 55.9'
          >
            <path
              fill='#9b9b9b'
              d='M102.1 42.5h9.9c1.3 0 2.3 0 2.8-.1v2.9c-.6 0-1.5-.1-2.8-.1H89.5c-1.3 0-2.3 0-2.8.1v-2.9c.5 0 1.5.1 2.8.1H99v-2.6h-6.5v-2.3c-1.8 1.2-3.7 2.2-5.6 2.9-.2-.4-1-1.2-2.3-2.4 1.6-.4 3.2-1.1 5-2s3.2-1.8 4.3-2.8h-8.7v-2.9c.6 0 1.6.1 3 .1h4.5V20.4h-3.5c-1.3 0-2.3 0-2.8.1v-2.9c.5 0 1.5.1 2.8.1h3.5v-2c0-.4 0-.8-.1-1.2.8 0 1.9 0 3.2.1 0 .4-.1.8-.1 1.1v1.9h9.8v-2c0-.4 0-.8-.1-1.2.8 0 1.9 0 3.2.1 0 .4-.1.8-.1 1.1v1.9h3.4c1.4 0 2.3 0 2.8-.1v2.9c-.5 0-1.5-.1-2.8-.1h-3.4v10.2h4.6c1.4 0 2.5 0 3-.1v2.9h-8.9c.5.4 1.3.9 2.2 1.4q1.35.75 3.3 1.5c1.3.5 2.5.9 3.8 1.2-1.1 1.3-1.7 2.1-1.9 2.6-1.9-.6-3.7-1.4-5.4-2.3V40H102v2.5zm-7.7-5.3H99v-1.5c0-.3 0-.6-.1-1 .4 0 .9 0 1.7.1s1.3.1 1.6.1c0 .3-.1.6-.1.9v1.5h6.1q-1.2-.75-2.4-1.8c-.8-.7-1.4-1.3-2-2h-6.5c-.6.7-1.2 1.3-2 2-.7.7-1.5 1.3-2.3 1.8h1.4zm11.2-16.8h-9.8v1.9h9.8zm-9.8 4.1v1.8h9.8v-1.8zm0 4.1v2h9.8v-2zM139.2 24.7q1.5 3 3.9 5.7c1.6 1.9 3.1 3.5 4.7 4.8 1.5 1.3 3 2.4 4.4 3.2-1 1.4-1.6 2.4-1.9 3a34.8 34.8 0 0 1-5.4-4.4 49 49 0 0 1-4.7-5.5c-1.4-1.9-2.5-3.8-3.4-5.8 0 .9.1 2.8.1 5.9s.1 4.8.1 5.4h6.9v3H137v4.3c0 .5 0 1 .1 1.7h-3.5c0-.7.1-1.2.1-1.7V40h-6.5v-3h6.6c0-5.5.1-9.3.2-11.2-.7 1.4-1.6 3.1-2.8 4.9s-2.3 3.4-3.4 4.7q-1.65 1.95-3 3.3c-.9.9-1.6 1.5-2.2 1.9q-.9.6-1.2.9c-.2-.4-.9-1.4-2.2-2.9 2.1-1.2 4.4-3.2 6.7-5.8s4.1-5.3 5.5-8.1h-7.6c-1.5 0-2.5 0-3 .1v-3.2c.6 0 1.6.1 3 .1h10v-6c0-.3 0-.7-.1-1 1.6 0 2.8 0 3.5.1 0 .4-.1.7-.1.9v6h10.7c1.5 0 2.5 0 3-.1v3.2c-.6 0-1.6-.1-3-.1zM154.8 43.3c1.4-.1 2.8-.4 4.4-.7 1.5-.3 2.9-.7 4-1s2-.7 2.5-1l2.7 1.5c-1.3.7-2.9 1.4-5 2.1s-4.2 1.2-6.3 1.7c-.2-.2-.5-.6-1.1-1.3-.7-.7-1.1-1.1-1.2-1.3m2.4-16.5-1.4.7-.7-3 1.5-.5c.9-.3 2.2-.9 4-1.6s3-1.3 3.6-1.6l.2 2.9c-3.3 1.5-5.7 2.5-7.2 3.1m6.6-9-1.4 2.4c-1-.6-2-1.3-3.2-1.9-1.1-.6-2.1-1.1-2.9-1.5l1.4-2.3c1.2.5 2.3 1.1 3.5 1.7s2 1.2 2.6 1.6m6 1.1c-.5.6-1 1.2-1.7 1.7s-1.3 1-1.9 1.4l-2.1-2c1.2-.6 2.3-1.5 3.3-2.6s1.7-2.3 2.2-3.5l2.8.6-.2.3c-.2.5-.5 1-.7 1.5h11.1l.3-.3c1.1.8 2 1.4 2.6 2l-.5.2c-.4.7-1 1.5-1.7 2.4s-1.4 1.6-2.1 2.2c-.3-.3-1.1-.7-2.7-1.4.4-.3.9-.6 1.5-1.1s1-1 1.4-1.4h-5.9v.1l-.1 1.1c.3.6.6 1.1 1 1.6s.9.9 1.5 1.3 1.2.7 1.9.9 1.6.5 2.6.7 2.3.3 3.7.4c-.5 1.1-.8 2-1 2.6-1.8-.2-3.4-.5-4.7-.9s-2.5-.9-3.6-1.5-2-1.4-2.7-2.5c-.8 1.1-1.9 2-3.4 2.7s-3.3 1.3-5.4 1.7h15.6v13.1h-21l.1-1.2V28.4c0-.3 0-.8-.1-1.2h4.1c-.4-.9-.8-1.6-1.2-2.2 1.5-.2 2.9-.5 4.1-.8s2.2-.8 3-1.3 1.4-1.1 1.9-1.8.7-1.4.8-2.3h-2.8zm8.3 12.1v-1.7h-14.8V31zm-14.8 1.9v1.7h14.8v-1.7zm0 5.4h14.8v-2h-14.8zm9.6 3.9 2.7-1.5q2.7.6 10.5 3l-1.9 2.4c-1.6-.6-3.4-1.3-5.6-2.1-2.2-.7-4-1.3-5.7-1.8M204.2 34.6l-2.1 1.6q-1.65-2.85-3.3-4.8l.1 13 .1 1.6h-3.3l.1-1.6c0-1.4 0-3.4.1-5.9 0-2.5.1-4.5.1-6-.7 2-1.5 3.7-2.4 5.3q-1.35 2.4-2.7 3.9c-.1-.3-.3-.8-.7-1.4-.3-.6-.7-1.1-.9-1.5.5-.5 1-1.1 1.5-1.7.5-.7 1-1.4 1.5-2.2s1-1.7 1.6-2.9c.6-1.1 1-2.3 1.4-3.6h-5.2v-2.9h5.9v-9.9c0-.3 0-.7-.1-1.1.8 0 1.9 0 3.1.1 0 .4-.1.7-.1 1v9.9h5.2v2.9h-5.2v2.3l1.7-1.1c1.4 1.8 2.6 3.5 3.6 5m-9.6-11.4-2.4.7c-.2-1-.5-2.2-.8-3.4s-.7-2.3-1-3.3l2.6-.6c.6 2.3 1.1 4.5 1.6 6.6m9.5-5.7c-.3 1.1-.6 2.3-1.1 3.5-.4 1.3-.8 2.3-1.2 3.1l-2.2-1c.4-.9.9-2.1 1.3-3.5s.7-2.6.8-3.4l2.6.9zm15.3 19.2-1.1.1v7l.1 2.2h-3.3l.1-2.2v-6.5l-9.1 1.3c-1.3.2-1.9.3-2 .3l-.2-3c.3 0 1-.1 2.1-.2l9.3-1.3V14.6c.3 0 .9 0 1.6.1.7 0 1.3.1 1.6.1V34l.8-.1c.1 0 .5-.1 1-.2s.9-.1 1.1-.2l.2 3c-.5 0-1.2.1-2.2.2m-6.1-7.7-1.6 2.6c-1.6-1.2-3.5-2.5-5.8-3.7l1.5-2.5c.8.4 1.8 1 3 1.6 1.1.7 2 1.4 2.9 2m.3-8.2-1.6 2.6c-.7-.6-1.7-1.3-2.7-2.1-1.1-.8-2-1.4-2.9-1.8l1.5-2.4q.75.45 2.4 1.5c1.1.7 2.2 1.4 3.3 2.2M60.1 27.4l-9.4-8.8V4.7C50.7 3.2 49.5 2 48 2h-5c-1.5 0-2.7 1.2-2.7 2.7v4L31.5.4c-.5-.5-1.3-.5-1.8 0L.4 27.4c-.5.5-.6 1.3-.1 1.9.3.3.6.4 1 .4.3 0 .6-.1.9-.4l4.2-3.9v27.5c0 1.6 1.3 2.9 2.9 2.9h11.5c1.5 0 2.7-1.2 2.7-2.7V37h11.8v16.1c0 1.5 1.2 2.7 2.7 2.7h13.1c1.6 0 2.9-1.3 2.9-2.9V25.3l4.2 4c.5.5 1.4.5 1.9-.1.6-.5.6-1.3 0-1.8m-17-22.8h5V16l-5-4.8zM51.4 23v30c0 .1-.1.3-.3.3H38V37.1c0-1.5-1.2-2.7-2.7-2.7H23.6c-1.5 0-2.7 1.2-2.7 2.7v16.1H9.4c-.1 0-.3-.1-.3-.3V23L30.7 3.2 51.6 23z'
            />
          </svg>
        </div>
        <div
          className='body'
          ref={ref}
          style={state.detailWidth ? { width: `${state.detailWidth}px` } : undefined}
        >
          <ul>{list}</ul>
        </div>
      </div>
    </div>
  );
});
export default Detail;
